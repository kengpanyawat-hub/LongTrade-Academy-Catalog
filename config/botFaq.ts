// config/botFaq.ts
export type BotRule = {
  intent: string;
  // à¸„à¸³/à¸§à¸¥à¸µ/à¸„à¸³à¸–à¸²à¸¡à¸—à¸µà¹ˆà¸„à¸²à¸”à¸§à¹ˆà¸²à¸ˆà¸°à¸žà¸´à¸¡à¸žà¹Œ (à¸£à¸­à¸‡à¸£à¸±à¸šà¸ à¸²à¸©à¸²à¹„à¸—à¸¢ & à¸­à¸±à¸‡à¸à¸¤à¸©)
  patterns: RegExp[];
  // à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸•à¸­à¸šà¸à¸¥à¸±à¸š (à¸„à¸·à¸™à¹€à¸›à¹‡à¸™ string)
  reply: () => string;
};

// à¸›à¸¸à¹ˆà¸¡à¸¥à¸±à¸”à¹à¸™à¸°à¸™à¸³à¹ƒà¸«à¹‰à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸à¸”à¸–à¸²à¸¡à¹„à¸§ à¹†
export const QUICK_REPLIES: string[] = [
  "à¸£à¸²à¸„à¸²",
  "à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­",
  "à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡à¸¢à¸±à¸‡à¹„à¸‡",
  "à¸£à¸µà¸§à¸´à¸§",
  "à¹‚à¸›à¸£à¹‚à¸¡à¸Šà¸±à¹ˆà¸™",
  "à¸•à¸´à¸”à¸•à¹ˆà¸­à¸„à¸™à¸ˆà¸£à¸´à¸‡",
];

// à¸„à¸¥à¸±à¸‡ QA à¸«à¸¥à¸±à¸ (à¹à¸à¹‰/à¹€à¸žà¸´à¹ˆà¸¡à¹„à¸”à¹‰à¸•à¸²à¸¡à¸•à¹‰à¸­à¸‡à¸à¸²à¸£)
export const BOT_RULES: BotRule[] = [
  {
    intent: "price",
    patterns: [/à¸£à¸²à¸„à¸²/i, /à¸„à¸­à¸£à¹Œà¸ª.*à¹€à¸—à¹ˆà¸²à¹„à¸£/i, /à¹€à¸—à¹ˆà¸²à¹„à¸«à¸£à¹ˆ/i, /how much/i],
    reply: () =>
      [
        "âœ¨ **à¸£à¸²à¸„à¸² & à¹à¸žà¹‡à¸à¹€à¸à¸ˆ**",
        "â€¢ Goldflow Indicator à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™ **à¹‚à¸›à¸£à¹à¸™à¸°à¸™à¸³** (à¸ªà¸­à¸šà¸–à¸²à¸¡à¸£à¸²à¸„à¸²à¸­à¸±à¸›à¹€à¸”à¸•à¸¥à¹ˆà¸²à¸ªà¸¸à¸”à¸à¸±à¸šà¸—à¸µà¸¡à¸‡à¸²à¸™)",
        "â€¢ EA / à¸„à¸­à¸£à¹Œà¸ªà¹€à¸£à¸µà¸¢à¸™ / Ebook à¸¡à¸µà¸«à¸¥à¸²à¸¢à¹à¸žà¹‡à¸à¹€à¸à¸ˆ",
        "",
        "à¸”à¸¹à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸—à¸µà¹ˆà¸«à¸™à¹‰à¸²à¹€à¸§à¹‡à¸š à¸«à¸£à¸·à¸­à¸„à¸¸à¸¢à¸à¸±à¸šà¸—à¸µà¸¡à¸‡à¸²à¸™à¸—à¸²à¸‡ LINE à¹„à¸”à¹‰à¹€à¸¥à¸¢:",
        "https://line.me/ti/p/~longtrade",
      ].join("\n"),
  },
  {
    intent: "buy",
    patterns: [/à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­/i, /à¸‹à¸·à¹‰à¸­/i, /à¸ˆà¹ˆà¸²à¸¢à¹€à¸‡à¸´à¸™/i, /payment/i, /order/i],
    reply: () =>
      [
        "ðŸ›’ **à¸§à¸´à¸˜à¸µà¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­**",
        "1) à¹à¸­à¸” LINE: https://line.me/ti/p/~longtrade",
        "2) à¹à¸ˆà¹‰à¸‡à¸ªà¸´à¸™à¸„à¹‰à¸²à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£ / à¹à¸žà¹‡à¸à¹€à¸à¸ˆ",
        "3) à¸—à¸µà¸¡à¸‡à¸²à¸™à¸ˆà¸°à¹à¸ˆà¹‰à¸‡à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™à¹à¸¥à¸°à¸à¸²à¸£à¹€à¸›à¸´à¸”à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹ƒà¸«à¹‰à¸„à¸£à¸šà¸„à¸£à¸±à¸š/à¸„à¹ˆà¸°",
      ].join("\n"),
  },
  {
    intent: "install",
    patterns: [/à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡/i, /à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸¢à¸±à¸‡à¹„à¸‡/i, /setup/i, /install/i, /à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™/i],
    reply: () =>
      [
        "âš™ï¸ **à¸§à¸´à¸˜à¸µà¸•à¸´à¸”à¸•à¸±à¹‰à¸‡/à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¹ƒà¸Šà¹‰à¸‡à¸²à¸™**",
        "â€¢ à¸£à¸­à¸‡à¸£à¸±à¸šà¸šà¸™ TradingView (à¸­à¸´à¸™à¸”à¸´à¹€à¸„à¹€à¸•à¸­à¸£à¹Œ)",
        "â€¢ à¸«à¸¥à¸±à¸‡à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­ à¸—à¸µà¸¡à¸‡à¸²à¸™à¸ˆà¸°à¹€à¸žà¸´à¹ˆà¸¡à¸ªà¸´à¸—à¸˜à¸´à¹Œà¹ƒà¸«à¹‰à¸šà¸±à¸à¸Šà¸µ TradingView à¸‚à¸­à¸‡à¸„à¸¸à¸“",
        "â€¢ à¸¡à¸µà¸§à¸´à¸”à¸µà¹‚à¸­à¸ªà¸­à¸™à¹ƒà¸Šà¹‰à¸‡à¸²à¸™ + à¸„à¸¹à¹ˆà¸¡à¸·à¸­",
        "",
        "à¸ªà¸­à¸šà¸–à¸²à¸¡/à¸™à¸±à¸”à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡à¸à¸±à¸šà¸—à¸µà¸¡à¸‡à¸²à¸™: https://line.me/ti/p/~longtrade",
      ].join("\n"),
  },
  {
    intent: "review",
    patterns: [/à¸£à¸µà¸§à¸´à¸§/i, /feedback/i, /testimonials?/i, /à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸ˆà¸£à¸´à¸‡/i],
    reply: () =>
      [
        "ðŸ—£ï¸ **à¸£à¸µà¸§à¸´à¸§à¸ˆà¸²à¸à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸ˆà¸£à¸´à¸‡**",
        "â€¢ à¹€à¸£à¸²à¸£à¸§à¸šà¸£à¸§à¸¡à¸£à¸µà¸§à¸´à¸§à¹„à¸§à¹‰à¸«à¸™à¹‰à¸² Goldflow + à¸«à¸™à¹‰à¸²à¸œà¸¥à¸´à¸•à¸ à¸±à¸“à¸‘à¹Œà¸•à¹ˆà¸²à¸‡ à¹†",
        "â€¢ à¸”à¸¹à¹€à¸”à¹‚à¸¡à¸§à¸´à¸”à¸µà¹‚à¸­à¹„à¸”à¹‰à¹ƒà¸™à¸«à¸™à¹‰à¸²à¹à¸£à¸à¸‚à¸­à¸‡à¹€à¸§à¹‡à¸š",
        "",
        "à¹€à¸›à¸´à¸”à¸”à¸¹à¹€à¸”à¹‚à¸¡à¸—à¸µà¹ˆà¸™à¸µà¹ˆ: https://www.longtradeacademy.com",
      ].join("\n"),
  },
  {
    intent: "promo",
    patterns: [/à¹‚à¸›à¸£/i, /à¸ªà¹ˆà¸§à¸™à¸¥à¸”/i, /promotion/i, /discount/i],
    reply: () =>
      [
        "ðŸŽ **à¹‚à¸›à¸£à¹‚à¸¡à¸Šà¸±à¹ˆà¸™/à¸ªà¹ˆà¸§à¸™à¸¥à¸”**",
        "â€¢ à¸¡à¸µà¹‚à¸›à¸£à¸­à¸±à¸›à¹€à¸”à¸•à¹€à¸›à¹‡à¸™à¸Šà¹ˆà¸§à¸‡ à¹†",
        "â€¢ à¹à¸™à¸°à¸™à¸³à¹ƒà¸«à¹‰à¸—à¸±à¸ LINE à¹€à¸žà¸·à¹ˆà¸­à¸£à¸±à¸šà¹‚à¸›à¸£à¸¥à¹ˆà¸²à¸ªà¸¸à¸”:",
        "https://line.me/ti/p/~longtrade",
      ].join("\n"),
  },
  {
    intent: "goldflow",
    patterns: [/goldflow/i, /à¹‚à¸à¸¥à¸”à¹Œà¹‚à¸Ÿà¸¥à¸§à¹Œ/i, /à¸£à¸°à¸šà¸šà¸—à¸­à¸‡/i],
    reply: () =>
      [
        "ðŸ“Š **GOLDFLOW SYSTEM**",
        "â€¢ à¸à¸¥à¸¢à¸¸à¸—à¸˜à¹Œ MA Crossover + à¸ªà¸±à¸à¸à¸²à¸“à¸¢à¸·à¸™à¸¢à¸±à¸™",
        "â€¢ à¸¡à¸µ TP/SL/Entry à¸Šà¸±à¸”à¹€à¸ˆà¸™ à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸‡à¹ˆà¸²à¸¢à¸šà¸™à¸Šà¸²à¸£à¹Œà¸•",
        "â€¢ à¹€à¸«à¸¡à¸²à¸°à¸à¸±à¸š Trend-Follow & Swing",
        "",
        "à¸”à¸¹à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸” + à¸§à¸´à¸”à¸µà¹‚à¸­à¹€à¸”à¹‚à¸¡: /indicators/goldflow",
      ].join("\n"),
  },
  {
    intent: "contact-human",
    patterns: [/à¸„à¸™à¸ˆà¸£à¸´à¸‡/i, /à¹à¸­à¸”à¸¡à¸´à¸™/i, /à¸•à¸´à¸”à¸•à¹ˆà¸­/i, /support/i, /help/i],
    reply: () =>
      [
        "ðŸ‘©â€ðŸ’¼ **à¸•à¸´à¸”à¸•à¹ˆà¸­à¸—à¸µà¸¡à¸‡à¸²à¸™**",
        "à¸—à¸±à¸ LINE à¹„à¸”à¹‰à¹€à¸¥à¸¢à¸„à¸£à¸±à¸š/à¸„à¹ˆà¸°: https://line.me/ti/p/~longtrade",
        "à¹€à¸£à¸²à¸•à¸­à¸šà¹„à¸§à¹ƒà¸™à¹€à¸§à¸¥à¸²à¸—à¸³à¸à¸²à¸£ à¹à¸¥à¸°à¸¡à¸µà¸—à¸µà¸¡à¸‡à¸²à¸™à¸Šà¹ˆà¸§à¸¢à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡/à¸ªà¸­à¸™à¹ƒà¸Šà¹‰à¸‡à¸²à¸™",
      ].join("\n"),
  },
  {
    intent: "default",
    patterns: [/.*/],
    reply: () =>
      [
        "à¸‚à¸­à¸šà¸„à¸¸à¸“à¸—à¸µà¹ˆà¸•à¸´à¸”à¸•à¹ˆà¸­à¸„à¸£à¸±à¸š/à¸„à¹ˆà¸° â€” à¸—à¸µà¸¡à¸‡à¸²à¸™à¸ˆà¸°à¸•à¸­à¸šà¸à¸¥à¸±à¸šà¹‚à¸”à¸¢à¹€à¸£à¹‡à¸§",
        "",
        "à¸¥à¸´à¸‡à¸à¹Œà¸—à¸µà¹ˆà¸­à¸²à¸ˆà¹€à¸›à¹‡à¸™à¸›à¸£à¸°à¹‚à¸¢à¸Šà¸™à¹Œ:",
        "â€¢ LINE: https://line.me/ti/p/~longtrade",
        "â€¢ Website: https://www.longtradeacademy.com",
      ].join("\n"),
  },
];

// à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸ˆà¸±à¸šà¸„à¸¹à¹ˆà¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸à¸±à¸šà¸à¸•à¸´à¸à¸² (simple scoring: à¹€à¸ˆà¸­ rule à¹à¸£à¸à¸—à¸µà¹ˆà¹à¸¡à¸•à¸Šà¹Œà¸à¹‡à¹ƒà¸Šà¹‰à¹€à¸¥à¸¢)
export function getBotReply(input: string): string {
  const text = (input || "").toLowerCase();
  for (const rule of BOT_RULES) {
    if (rule.patterns.some((re) => re.test(text))) {
      return rule.reply();
    }
  }
  // à¸ªà¸³à¸£à¸­à¸‡ (à¹„à¸¡à¹ˆà¸„à¸§à¸£à¸–à¸¶à¸‡)
  return BOT_RULES[BOT_RULES.length - 1].reply();
}
